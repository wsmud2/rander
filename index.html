<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>MUD 渲染模拟器 (美化对齐版)</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="dist/ws.css" rel="stylesheet" />
    <style>
        /* 基础布局样式 */
        html, body { 
            height: 100%; 
            overflow: hidden; 
            background-color: black; /* 给body一个深色背景 */
        }
        #app-container { 
            display: flex; 
            flex-direction: column; 
            height: 100dvh; /* 使用dvh单位，更好地适配移动端浏览器 */
        }
        .content-message { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
        }
        .content-message pre { 
            margin: 0; 
            white-space: pre-wrap; 
            font-family: inherit; 
            font-size: inherit; 
            line-height: 1.6; /* 增加行高，提升可读性 */
        }
        
        /* 控制区域样式 */
        #controls { 
            padding: 10px; 
            background-color: #000000; 
            border-top: 1px solid #333; 
            transition: all 0.3s ease-in-out;
            flex-shrink: 0; /* 防止在flex布局中被压缩 */
        }
        
        /* --- 美化部分开始 --- */

        /* 输入框样式 */
        #source-input { 
            width: 100%; 
            height: 150px; 
            background-color: #252526; 
            color: #ccc; 
            border: 2px solid #444; /* 边框加粗一点 */
            border-radius: 8px; /* 圆角 */
            padding: 10px; 
            font-family: inherit;
            font-size: 14px;
            resize: vertical; 
            margin-top: 10px;
            box-sizing: border-box; /* 确保padding和border不影响总宽度 */
            outline: none; /* 移除默认的浏览器轮廓 */
            transition: border-color 0.2s ease, box-shadow 0.2s ease; /* 平滑过渡效果 */
        }

        /* 输入框聚焦时的效果 */
        #source-input:focus {
            border-color: #007acc; /* 蓝色高亮边框 */
            box-shadow: 0 0 8px rgba(0, 122, 204, 0.5); /* 添加外发光效果 */
        }

        /* 自定义输入框的占位符颜色 */
        #source-input::placeholder {
            color: #666;
        }

        /* 美化滚动条 (仅限 Webkit 内核浏览器，如 Chrome, Safari) */
        #source-input::-webkit-scrollbar {
            width: 8px;
        }
        #source-input::-webkit-scrollbar-track {
            background: #252526;
        }
        #source-input::-webkit-scrollbar-thumb {
            background-color: #555;
            border-radius: 4px;
        }
        #source-input::-webkit-scrollbar-thumb:hover {
            background-color: #777;
        }

        /* 折叠/展开按钮的样式 */
        #toggle-controls-btn {
            position: relative; /* 用于定位箭头图标 */
            width: 100%;
            padding: 12px 20px;
            background-color: #3c3c3c;
            color: #f0f0f0;
            border: none;
            border-radius: 8px; /* 圆角 */
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s ease; /* 平滑过渡效果 */
            
            /* --- 修正开始 --- */
            display: flex;
            justify-content: center;
            align-items: center;
            /* text-align: center;  <-- 这个可以移除了，因为flex布局已经处理了水平居中 */
            /* --- 修正结束 --- */
        }

        /* 按钮悬停效果 */
        #toggle-controls-btn:hover {
            background-color: #4a4a4a;
        }

        /* 使用伪元素创建箭头图标 */
        #toggle-controls-btn::after {
            content: '';
            position: absolute;
            right: 20px;
            top: 50%;
            width: 8px;
            height: 8px;
            border-bottom: 2px solid #f0f0f0;
            border-right: 2px solid #f0f0f0;
            transition: transform 0.3s ease-in-out;

            /* --- 修正开始 --- */
            /* 初始状态：箭头向上 (表示可以折叠) */
            /* 使用 translateY(-50%) 来精确垂直居中，不再使用 -70% */
            transform: translateY(-50%) rotate(-135deg);
            /* --- 修正结束 --- */
        }

        /* 当 controls 容器折叠时的样式 */
        #controls.collapsed {
            padding-top: 10px;
            padding-bottom: 10px;
        }
        #controls.collapsed #source-input {
            display: none;
        }
        /* 折叠时，旋转箭头图标向下 (表示可以展开) */
        #controls.collapsed #toggle-controls-btn::after {
            /* --- 修正开始 --- */
            /* 同样使用 translateY(-50%) 来确保居中 */
            transform: translateY(-50%) rotate(45deg);
            /* --- 修正结束 --- */
        }

        /* --- 美化部分结束 --- */

    </style>
</head>
<body>
    <div id="app-container">
        <div class="content-message">
            <pre id="render-output"></pre>
        </div>
        <div id="controls">
            <button id="toggle-controls-btn" aria-expanded="true">
                <span class="toggle-text">隐藏输入框</span>
            </button>
            <textarea id="source-input" spellcheck="false" placeholder="在此粘贴从游戏复制的原始文本..."></textarea>
        </div>
    </div>
    <script src="dist/renderer.js" defer></script>
</body>
</html>
